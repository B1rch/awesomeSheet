var nif=function(){var a={clone:{attack:[{weapon:"Dagger (Master Work)",attack:"3",damage:"1d6+1",critical:"19–20/x2",ammo:"-",range:"-"},{weapon:"Shortbow",attack:"6",damage:"1d6",critical:"x3",ammo:"50",range:"60 ft"}],consumable:[{item:"Wand of Infernal Healing",total:"50",used:"48"},{item:"Wand of Lightning Bolt",total:"50",used:"38"},{item:"Shift",total:"9",used:""}]},input:{name:"Nif Amakir",race:"Elf","class":"Wizard",level:"6",size:"Medium",alignment:"Lawful Neutral",xp:"23,264",height:"6'0",weight:"136 lbs",age:"120 years",gender:"Male",speed:"30 feet, 6 squares",initiative:"3",platinum:"",gold:"1,090",silver:"",copper:"",hero_points:"2",luck_points:"",stat_str:"8",stat_dex:"17",stat_con:"14",stat_int:"21",stat_wis:"12",stat_cha:"10",light_load:"26 lbs or less",medium_load:"27–53 lbs",heavy_load:"54–80 lbs",stat_str_temp:"",stat_dex_temp:"",stat_con_temp:"",stat_int_temp:"23",stat_wis_temp:"",stat_cha_temp:"",body_slot_armor:"",body_slot_belts:"",body_slot_body:"",body_slot_chest:"",body_slot_eyes:"",body_slot_feet:"",body_slot_hands:"",body_slot_head:"",body_slot_headband:"Headband of Vast Intelligence +2",body_slot_neck:"Amulet of Natural Armor +1",body_slot_ring_left_hand:"Ring of Sustenance",body_slot_ring_right_hand:"",body_slot_shield:"",body_slot_shoulders:"Cloak of Resistance +2",body_slot_wrist:"",hp:"42",temp_hp:"",current_hp:"42",current_non_lethal_hp:"",ac_misc:"",ac_temp:"",ac_flat_footed_misc:"",ac_flat_footed_temp:"",ac_touch_misc:"",ac_touch_temp:"",ac_armor:"",ac_shield:"",ac_deflect:"",ac_dodge:"",ac_natural:"1",size_bonus:"",fortitude_base:"2",fortitude_racial:"",fortitude_misc:"5",fortitude_temp:"",reflex_base:"2",reflex_racial:"",reflex_misc:"2",reflex_temp:"",will_base:"5",will_racial:"",will_misc:"2",will_temp:"",cmb_misc:"",cmb_temp:"",cmd_misc:"",cmd_temp:"",melee_attack_misc:"",melee_attack_temp:"",ranged_attack_misc:"",ranged_attack_temp:"",base_attack:"3",special_size_bonus:"",concentration:"11",skill_acrobatics_ranks:"",skill_acrobatics_misc:"",skill_appraise_ranks:"2",skill_appraise_misc:"3",skill_bluff_ranks:"",skill_bluff_misc:"",skill_climb_ranks:"",skill_climb_misc:"",skill_craft_ranks:"",skill_craft_misc:"",skill_diplomacy_ranks:"",skill_diplomacy_misc:"",skill_disguise_ranks:"",skill_disguise_misc:"",skill_escape_artist_ranks:"",skill_escape_artist_misc:"",skill_fly_ranks:"2",skill_fly_misc:"3",skill_heal_ranks:"",skill_heal_misc:"",skill_intimidate_ranks:"",skill_intimidate_misc:"",skill_knowledge_arcana_ranks:"3",skill_knowledge_arcana_misc:"3",skill_knowledge_dungeoneering_ranks:"2",skill_knowledge_dungeoneering_misc:"3",skill_knowledge_engineering_ranks:"1",skill_knowledge_engineering_misc:"3",skill_knowledge_geography_ranks:"1",skill_knowledge_geography_misc:"3",skill_knowledge_history_ranks:"1",skill_knowledge_history_misc:"3",skill_knowledge_local_ranks:"1",skill_knowledge_local_misc:"3",skill_knowledge_nature_ranks:"1",skill_knowledge_nature_misc:"3",skill_knowledge_nobility_ranks:"1",skill_knowledge_nobility_misc:"3",skill_knowledge_planes_ranks:"3",skill_knowledge_planes_misc:"3",skill_knowledge_religion_ranks:"3",skill_knowledge_religion_misc:"3",skill_linguistics_ranks:"3",skill_linguistics_misc:"3",skill_perception_ranks:"6",skill_perception_misc:"4",skill_perform_ranks:"",skill_perform_misc:"",skill_ride_ranks:"",skill_ride_misc:"",skill_sense_motive_ranks:"",skill_sense_motive_misc:"",skill_spellcraft_ranks:"6",skill_spellcraft_misc:"3",skill_stealth_ranks:"",skill_stealth_misc:"",skill_survival_ranks:"",skill_survival_misc:"",skill_swim_ranks:"",skill_swim_misc:"",skill_use_magic_device_ranks:"6",skill_use_magic_device_misc:"",spells_known_level_0:"4",spells_daily_level_0:"",spell_dc_level_0:"16",spells_known_level_1:"5",spells_daily_level_1:"",spell_dc_level_1:"17",spells_known_level_2:"4",spells_daily_level_2:"",spell_dc_level_2:"18",spells_known_level_3:"3",spells_daily_level_3:"",spell_dc_level_3:"19",spells_known_level_4:"",spells_daily_level_4:"",spell_dc_level_4:"",spells_known_level_5:"",spells_daily_level_5:"",spell_dc_level_5:"",spells_known_level_6:"",spells_daily_level_6:"",spell_dc_level_6:"",spells_known_level_7:"",spells_daily_level_7:"",spell_dc_level_7:"",spells_known_level_8:"",spells_daily_level_8:"",spell_dc_level_8:"",spells_known_level_9:"",spells_daily_level_9:"",spell_dc_level_9:""},textarea:{feats:"Alertness, Augment Summoning, Craft Wondrous Item, Greater Spell Focus (Conjuration), Scribe Scroll, Spell Focus (Conjuration)",traits:"<strong>Resilient</strong> (+1 trait bonus on Fortitude saves)",languages:"Celestial, Common, Draconic, Dwarven, Elven, Giant, Gnome, Goblin, Orc, Sylvan, Undercommon",special_abilities:"Arcane bond (Su), Bonus feats, Cantrips, Arcane schools, Teleportation sub school, Opposition arcane school, Elven Immunities (Ex), Elven Magic (Ex), Keen Senses (Ex), Low-Light Vision (Ex), Headband of Vast Intelligence skill (Use Magic Device), Linguistics Skill (Dwarven, Giant, Undercommon), Shift (Su), Summoner's Charm (Su), Weapon Familiarity (Ex)",gear:"Spell component pouch, Spellbook, Backpack, Flask of Oil x3, Pouch (belt), Sack, Candle, Flint and Steel, Tindertwig, Rations (5 days), Waterskin, Bedroll, Blanket, Bloodblock, Healer's Kik, Rope (silk), Mirror, Compass, Ink, Inkpen, Paper sheets, Case for maps/scrolls, Scroll Case, Combat trained horse",magic_gear:"Pearl of Power (1st Level), Potion of CLW x1, Potion of Aid, Vile of Antitoxin, Vile of Holy Water, Scroll of Acid Pit x1, Scroll of Summon Monster III x5, Scroll of Invisibility x2, Scroll of Create Pit x1, Scroll of Web x4, Scroll of Stinking Cloud x2, Scroll of Grease x2, Scroll of Mirror Image x3, Scroll of Spiked Pit x3 Scroll of Fly x2",defense_notes:"Immune to sleep effecrs, +2 against enchantment spells and effects",attack_notes:"",notes:'<strong>Arcane bond (Su)</strong> Rat Bower, +2 Fortitude save,<br><br><strong>Bonus feats</strong>,<br><br><strong>Cantrips</strong>,<br><br><strong>Arcane schools</strong> Conjuration,<br><br><strong>Teleportation sub school</strong>,<br><br><strong>Opposition arcane school</strong> Enchantment, Necromancy,<br><br><strong>Elven Immunities (Ex)</strong> +2 against enchantment spells and effects,<br><br><strong>Elven Magic (Ex)</strong> +2 caster level checks made to overcome SR. +2 Spellcraft check to identify properties of magic items,<br><br><strong>Keen Senses (Ex)</strong> +2 Perception checks,<br><br><strong>Low-Light Vision (Ex)</strong> See x2 as far as humans in low illumination,<br><br><strong>Headband of Vast Intelligence skill</strong> Use Magic Device,<br><br><strong>Linguistics Skill</strong> Dwarven, Giant, Undercommon,<br><br><strong>Shift (Su)</strong> Teleport 15 feet 9 times per day,<br><br><strong>Summoner\'s Charm (Su)</strong> +2 rounds duration for Conjuration (Summoning) spells,<br><br><strong>Weapon Familiarity (Ex)</strong> Proficient with longbows (including composite longbows), longswords, rapiers, and shortbows (including composite shortbows), treat weapon with "elven" in name as a martial weapon.'},spells:[{name:"Bleed",level:0,prepared:0,active:!1,cast:0},{name:"Erase",level:0,prepared:0,active:!1,cast:0},{name:"Daze",level:0,prepared:0,active:!1,cast:0},{name:"Disrupt Undead",level:0,prepared:0,active:!1,cast:0},{name:"Touch of Fatigue",level:0,prepared:0,active:!1,cast:0},{name:"Prestidigitation",level:0,prepared:0,active:!1,cast:0},{name:"Light",level:0,prepared:0,active:!1,cast:0},{name:"Ghost Sound",level:0,prepared:0,active:!1,cast:0},{name:"Spark",level:0,prepared:0,active:!1,cast:0},{name:"Acid Splash",level:0,prepared:0,active:!1,cast:0},{name:"Mage Hand",level:0,prepared:0,active:!1,cast:0},{name:"Flare",level:0,prepared:0,active:!1,cast:0},{name:"Detect Magic",level:0,prepared:1,active:!1,cast:0},{name:"Detect Poison",level:0,prepared:0,active:!1,cast:0},{name:"Dancing Lights",level:0,prepared:1,active:!1,cast:0},{name:"Mending",level:0,prepared:0,active:!1,cast:0},{name:"Arcane Mark",level:0,prepared:0,active:!1,cast:0},{name:"Message",level:0,prepared:1,active:!1,cast:0},{name:"Ray of Frost",level:0,prepared:0,active:!1,cast:0},{name:"Read Magic",level:0,prepared:1,active:!1,cast:0},{name:"Open Close",level:0,prepared:0,active:!1,cast:0},{name:"Resistance",level:0,prepared:0,active:!1,cast:0},{name:"Comprehend Languages",level:1,prepared:0,active:!1,cast:0},{name:"Enlarge Person",level:1,prepared:0,active:!1,cast:0},{name:"Feather Fall",level:1,prepared:0,active:!1,cast:0},{name:"Grease",level:1,prepared:2,active:!1,cast:0},{name:"Mage Armor",level:1,prepared:0,active:!1,cast:0},{name:"Mount",level:1,prepared:0,active:!1,cast:0},{name:"Obscuring Mist",level:1,prepared:1,active:!1,cast:0},{name:"Protection from Chaos",level:1,prepared:0,active:!1,cast:0},{name:"Protection from Evil",level:1,prepared:2,active:!1,cast:0},{name:"Shield",level:1,prepared:0,active:!1,cast:0},{name:"Summon Monster I",level:1,prepared:0,active:!1,cast:0},{name:"Unseen Servant",level:1,prepared:0,active:!1,cast:0},{name:"Blur",level:2,prepared:0,active:!1,cast:0},{name:"Create Pit",level:2,prepared:0,active:!1,cast:0},{name:"Flaming Sphere",level:2,prepared:0,active:!1,cast:0},{name:"Glitterdust",level:2,prepared:0,active:!1,cast:0},{name:"Invisibility",level:2,prepared:2,active:!1,cast:0},{name:"Levitate",level:2,prepared:0,active:!1,cast:0},{name:"Mirror Image",level:2,prepared:0,active:!1,cast:0},{name:"Resist Energy",level:2,prepared:0,active:!1,cast:0},{name:"Stone Call",level:2,prepared:0,active:!1,cast:0},{name:"Summon Monster II",level:2,prepared:1,active:!1,cast:0},{name:"Web",level:2,prepared:1,active:!1,cast:0},{name:"Stinking Cloud",level:3,prepared:0,active:!1,cast:0},{name:"Summon Monster III",level:3,prepared:1,active:!1,cast:0},{name:"Spiked Pit",level:3,prepared:1,active:!1,cast:0},{name:"Aqueous Orb",level:3,prepared:0,active:!1,cast:0},{name:"Fly",level:3,prepared:1,active:!1,cast:0},{name:"Sleet Storm",level:3,prepared:0,active:!1,cast:0}]};return{data:a}}(),ro=function(){var a={clone:{attack:[{weapon:"Rapier",attack:"5",damage:"1d6+1",critical:"18–20/x2",ammo:"-",range:"-"},{weapon:"Shortbow",attack:"5",damage:"1d6",critical:"x3",ammo:"50",range:"60 ft"}],consumable:[{item:"Arcane Pool",total:"4",used:"1"}]},input:{name:"Ro Flint",race:"Elf","class":"Magus",level:"2",size:"Medium",alignment:"Lawful Neutral",xp:"1,971",height:"6'0",weight:"",age:"120 years",gender:"Male",speed:"30 feet/6 squares",initiative:"4",platinum:"",gold:"570",silver:"",copper:"",hero_points:"",luck_points:"",stat_str:"12",stat_dex:"18",stat_con:"10",stat_int:"16",stat_wis:"10",stat_cha:"7",light_load:"43 lbs or less",medium_load:"44–86 lbs",heavy_load:"87–130 lbs",stat_str_temp:"",stat_dex_temp:"",stat_con_temp:"",stat_int_temp:"",stat_wis_temp:"",stat_cha_temp:"",body_slot_armor:"Studded leather",body_slot_belts:"",body_slot_body:"",body_slot_chest:"",body_slot_eyes:"",body_slot_feet:"",body_slot_hands:"",body_slot_head:"",body_slot_headband:"",body_slot_neck:"",body_slot_ring_left_hand:"",body_slot_ring_right_hand:"",body_slot_shield:"",body_slot_shoulders:"",body_slot_wrist:"",hp:"14",temp_hp:"",current_hp:"14",current_non_lethal_hp:"",ac_misc:"",ac_temp:"",ac_flat_footed_misc:"",ac_flat_footed_temp:"",ac_touch_misc:"",ac_touch_temp:"",ac_armor:"3",ac_shield:"",ac_deflect:"",ac_dodge:"",ac_natural:"",size_bonus:"",fortitude_base:"3",fortitude_racial:"",fortitude_misc:"",fortitude_temp:"",reflex_base:"0",reflex_racial:"",reflex_misc:"",reflex_temp:"",will_base:"3",will_racial:"",will_misc:"",will_temp:"",cmb_misc:"",cmb_temp:"",cmd_misc:"",cmd_temp:"",melee_attack_misc:"",melee_attack_temp:"",ranged_attack_misc:"",ranged_attack_temp:"",base_attack:"1",special_size_bonus:"",concentration:"6",skill_acrobatics_ranks:"2",skill_acrobatics_misc:"",skill_appraise_ranks:"",skill_appraise_misc:"",skill_bluff_ranks:"",skill_bluff_misc:"",skill_climb_ranks:"",skill_climb_misc:"",skill_craft_ranks:"",skill_craft_misc:"",skill_diplomacy_ranks:"",skill_diplomacy_misc:"",skill_disguise_ranks:"",skill_disguise_misc:"",skill_escape_artist_ranks:"",skill_escape_artist_misc:"",skill_fly_ranks:"",skill_fly_misc:"",skill_heal_ranks:"",skill_heal_misc:"",skill_intimidate_ranks:"",skill_intimidate_misc:"",skill_knowledge_arcana_ranks:"1",skill_knowledge_arcana_misc:"3",skill_knowledge_dungeoneering_ranks:"",skill_knowledge_dungeoneering_misc:"",skill_knowledge_engineering_ranks:"",skill_knowledge_engineering_misc:"",skill_knowledge_geography_ranks:"",skill_knowledge_geography_misc:"",skill_knowledge_history_ranks:"",skill_knowledge_history_misc:"",skill_knowledge_local_ranks:"",skill_knowledge_local_misc:"",skill_knowledge_nature_ranks:"",skill_knowledge_nature_misc:"",skill_knowledge_nobility_ranks:"",skill_knowledge_nobility_misc:"",skill_knowledge_planes_ranks:"",skill_knowledge_planes_misc:"",skill_knowledge_religion_ranks:"",skill_knowledge_religion_misc:"",skill_linguistics_ranks:"",skill_linguistics_misc:"",skill_perception_ranks:"2",skill_perception_misc:"2",skill_perform_ranks:"",skill_perform_misc:"",skill_ride_ranks:"2",skill_ride_misc:"3",skill_sense_motive_ranks:"",skill_sense_motive_misc:"",skill_spellcraft_ranks:"2",skill_spellcraft_misc:"3",skill_stealth_ranks:"1",skill_stealth_misc:"",skill_survival_ranks:"",skill_survival_misc:"",skill_swim_ranks:"",skill_swim_misc:"",skill_use_magic_device_ranks:"",skill_use_magic_device_misc:"",spells_known_level_0:"",spells_daily_level_0:"4",spell_dc_level_0:"13",spells_known_level_1:"",spells_daily_level_1:"3",spell_dc_level_1:"14",spells_known_level_2:"",spells_daily_level_2:"",spell_dc_level_2:"",spells_known_level_3:"",spells_daily_level_3:"",spell_dc_level_3:"",spells_known_level_4:"",spells_daily_level_4:"",spell_dc_level_4:"",spells_known_level_5:"",spells_daily_level_5:"",spell_dc_level_5:"",spells_known_level_6:"",spells_daily_level_6:"",spell_dc_level_6:"",spells_known_level_7:"",spells_daily_level_7:"",spell_dc_level_7:"",spells_known_level_8:"",spells_daily_level_8:"",spell_dc_level_8:"",spells_known_level_9:"",spells_daily_level_9:"",spell_dc_level_9:""},textarea:{feats:"Weapon Finesse",traits:"<strong>Magical Lineage</strong> (Shocking Grasp), <strong>Focused Mind</strong> (+2 on concentration checks)",languages:"Common, Draconic, Dwarven, Elven, Orc",special_abilities:"Low-Light Vision (Ex), Elven Immunities (Ex), Elven Magic (Ex), Weapon Familiarity (Ex), Keen Senses (Ex), Arcane Pool, Cantrips, Spell Combat (EX)",gear:"Fur coat and cold weather outfit, Rapier, Spell component pouch, Spellbook, Backpack, Flask of Oil x3, Pouch (belt), Sack, Candle, Flint and Steel, Tindertwig, Rations (5 days), Waterskin, Bedroll, Blanket, Rope (silk), Mirror, Compass, Ink, Inkpen, Paper sheets, Case for maps/scrolls, Trained Donkey (commands: come, down, stay heal, work), Alchemist Fire (3)",magic_gear:"",defense_notes:"Immune to sleep effecrs, +2 against enchantment spells and effects, +7 against cold weather",attack_notes:"",notes:'<strong>Low-Light Vision (Ex)</strong> See x2 as far as humans in low illumination,<br><br><strong>Elven Immunities (Ex)</strong> Immune to magic sleep effects, +2 against Enchantment spells and effects,<br><br><strong>Elven Magic (Ex)</strong> +2 caster level checks made to overcome SR. +2 Spellcraft check to identify properties of magic items,<br><br><strong>Weapon Familiarity (Ex)</strong> Proficient with longbows (including composite longbows), longswords, rapiers, and shortbows (including composite shortbows), treat weapon with "elven" in name as a martial weapon),<br><br><strong>Keen Senses (Ex)</strong> +2 Perception checks,<br><br><strong>Arcane Pool</strong> 4,<br><br><strong>Cantrips</strong> <strong>Spell Combat (EX)</strong> cast spells and wield his weapons at the same time.'},spells:[{name:"Acid Splash",level:0,prepared:0,active:!1,cast:0},{name:"Arcane Mark",level:0,prepared:0,active:!1,cast:0},{name:"Dancing Lights",level:0,prepared:1,active:!1,cast:0},{name:"Daze",level:0,prepared:0,active:!1,cast:0},{name:"Detect Magic",level:0,prepared:1,active:!1,cast:0},{name:"Disrupt Undead",level:0,prepared:0,active:!1,cast:0},{name:"Flare",level:0,prepared:0,active:!1,cast:0},{name:"Ghost Sound",level:0,prepared:0,active:!1,cast:0},{name:"Light",level:0,prepared:0,active:!1,cast:0},{name:"Mage Hand",level:0,prepared:1,active:!1,cast:0},{name:"Open Close",level:0,prepared:0,active:!1,cast:0},{name:"Prestidigitation",level:0,prepared:0,active:!1,cast:0},{name:"Ray of Frost",level:0,prepared:0,active:!1,cast:0},{name:"Read Magic",level:0,prepared:0,active:!1,cast:0},{name:"Spark",level:0,prepared:0,active:!1,cast:0},{name:"Color Spray",level:1,prepared:0,active:!1,cast:0},{name:"Grease",level:1,prepared:0,active:!1,cast:0},{name:"Shocking Grasp",level:1,prepared:2,active:!1,cast:0},{name:"True Strike",level:1,prepared:0,active:!1,cast:0},{name:"Magic Missile",level:1,prepared:0,active:!1,cast:0},{name:"Shield",level:1,prepared:1,active:!1,cast:0},{name:"Vanish",level:1,prepared:0,active:!1,cast:0},{name:"Obscuring Mist",level:1,prepared:0,active:!1,cast:0},{name:"Chill Touch",level:1,prepared:0,active:!1,cast:0},{name:"Frostbite",level:1,prepared:0,active:!1,cast:0},{name:"Infernal Healing",level:1,prepared:0,active:!1,cast:0},{name:"Windy Escape",level:1,prepared:0,active:!1,cast:0}]};return{data:a}}(),vos=function(){var a={clone:{attack:[{weapon:"Flurry of Blows",attack:"3/3",damage:"1d6+3",critical:"20x2",ammo:"-",range:"-"},{weapon:"Grapple",attack:"7",damage:"1d6+3",critical:"20x2",ammo:"-",range:"-"},{weapon:"Stunning Fist",attack:"5",damage:"1d6+3",critical:"20x2",ammo:"-",range:"-"}],consumable:[]},input:{name:"Vos Thunderstomp",race:"Dwarf","class":"Monk",level:"2",size:"Medium",alignment:"Chaotic Neutral",xp:"3,852",height:"5'0",weight:"190 lbs",age:"40 years",gender:"Male",speed:"20 feet/4 squares",initiative:"2",platinum:"",gold:"150",silver:"5",copper:"",hero_points:"",luck_points:"",stat_str:"16",stat_dex:"14",stat_con:"12",stat_int:"10",stat_wis:"14",stat_cha:"7",light_load:"76 lbs or less",medium_load:"77–153 lbs",heavy_load:"154–230 lbs",stat_str_temp:"",stat_dex_temp:"",stat_con_temp:"",stat_int_temp:"",stat_wis_temp:"",stat_cha_temp:"",body_slot_armor:"",body_slot_belts:"",body_slot_body:"",body_slot_chest:"",body_slot_eyes:"",body_slot_feet:"",body_slot_hands:"",body_slot_head:"",body_slot_headband:"",body_slot_neck:"",body_slot_ring_left_hand:"",body_slot_ring_right_hand:"",body_slot_shield:"",body_slot_shoulders:"Cloak of Resistance +1",body_slot_wrist:"Bracers of Armor +1",hp:"17",temp_hp:"",current_hp:"17",current_non_lethal_hp:"",ac_misc:"2",ac_temp:"",ac_flat_footed_misc:"2",ac_flat_footed_temp:"",ac_touch_misc:"2",ac_touch_temp:"",ac_armor:"1",ac_shield:"",ac_deflect:"",ac_dodge:"",ac_natural:"",size_bonus:"",fortitude_base:"3",fortitude_racial:"",fortitude_misc:"1",fortitude_temp:"",reflex_base:"3",reflex_racial:"",reflex_misc:"1",reflex_temp:"",will_base:"3",will_racial:"",will_misc:"1",will_temp:"",cmb_misc:"",cmb_temp:"",cmd_misc:"2",cmd_temp:"",melee_attack_misc:"",melee_attack_temp:"",ranged_attack_misc:"",ranged_attack_temp:"",base_attack:"1",special_size_bonus:"",concentration:"",skill_acrobatics_ranks:"2",skill_acrobatics_misc:"3",skill_appraise_ranks:"",skill_appraise_misc:"2",skill_bluff_ranks:"",skill_bluff_misc:"",skill_climb_ranks:"2",skill_climb_misc:"3",skill_craft_ranks:"",skill_craft_misc:"",skill_diplomacy_ranks:"",skill_diplomacy_misc:"",skill_disguise_ranks:"",skill_disguise_misc:"",skill_escape_artist_ranks:"",skill_escape_artist_misc:"",skill_fly_ranks:"",skill_fly_misc:"",skill_heal_ranks:"",skill_heal_misc:"",skill_intimidate_ranks:"",skill_intimidate_misc:"",skill_knowledge_arcana_ranks:"",skill_knowledge_arcana_misc:"",skill_knowledge_dungeoneering_ranks:"",skill_knowledge_dungeoneering_misc:"",skill_knowledge_engineering_ranks:"",skill_knowledge_engineering_misc:"",skill_knowledge_geography_ranks:"",skill_knowledge_geography_misc:"",skill_knowledge_history_ranks:"",skill_knowledge_history_misc:"",skill_knowledge_local_ranks:"",skill_knowledge_local_misc:"",skill_knowledge_nature_ranks:"",skill_knowledge_nature_misc:"",skill_knowledge_nobility_ranks:"",skill_knowledge_nobility_misc:"",skill_knowledge_planes_ranks:"",skill_knowledge_planes_misc:"",skill_knowledge_religion_ranks:"",skill_knowledge_religion_misc:"",skill_linguistics_ranks:"",skill_linguistics_misc:"",skill_perception_ranks:"2",skill_perception_misc:"3",skill_perform_ranks:"",skill_perform_misc:"",skill_ride_ranks:"",skill_ride_misc:"",skill_sense_motive_ranks:"",skill_sense_motive_misc:"",skill_spellcraft_ranks:"",skill_spellcraft_misc:"",skill_stealth_ranks:"2",skill_stealth_misc:"3",skill_survival_ranks:"",skill_survival_misc:"",skill_swim_ranks:"",skill_swim_misc:"",skill_use_magic_device_ranks:"",skill_use_magic_device_misc:"",spells_known_level_0:"",spells_daily_level_0:"",spell_dc_level_0:"",spells_known_level_1:"",spells_daily_level_1:"",spell_dc_level_1:"",spells_known_level_2:"",spells_daily_level_2:"",spell_dc_level_2:"",spells_known_level_3:"",spells_daily_level_3:"",spell_dc_level_3:"",spells_known_level_4:"",spells_daily_level_4:"",spell_dc_level_4:"",spells_known_level_5:"",spells_daily_level_5:"",spell_dc_level_5:"",spells_known_level_6:"",spells_daily_level_6:"",spell_dc_level_6:"",spells_known_level_7:"",spells_daily_level_7:"",spell_dc_level_7:"",spells_known_level_8:"",spells_daily_level_8:"",spell_dc_level_8:"",spells_known_level_9:"",spells_daily_level_9:"",spell_dc_level_9:""},textarea:{feats:"Improved Grapple, Weapon Focus (Grapple)",traits:"",languages:"Common, Dwarven",special_abilities:"Darkvision, Defensive Training, Greed, Hatred, Hardy, Stability, Stonecunning, Weapon Familiarity, Evasion, Flurry of Blows (Ex), Stunning Fist (Ex), Unarmed Strike, Evasion (Ex)",gear:"Backpack, Flask Of Oil (3), Pouch (belt), Sack, Candle, Flint And Steel, Tindertwig, Rations (5 Days), Waterskin, Bedroll, Blanket, Bloodblock, Rope (silk), Mirror, Compass, Ink, Inkpen, Paper Sheets, Case For Maps/scrolls, Torch, Rubbing Poweder, Rubbing Oils, Scented Oils (5), Fine Cheese (1), Smelly Cheese (3), Wine (2), Wrestling Costume (2), Alchemist Fire (3), Dagger",magic_gear:"Potion of Cure Light Wounds (2), Potion of Owls Wisdom (1), Kessens Boon (1)",defense_notes:"+2 against poison, spells, and spell-like abilities.",attack_notes:"+1 weapon focus, +2 grapple, +2 to resist grapple",notes:'<strong>Darkvision</strong> See in the dark up to 60 feet.<br><br><strong>Defensive Training</strong> +4 dodge bonus to AC against monsters of the giant subtype.<br><br><strong>Greed</strong> +2 racial bonus on Appraise skill checks made to determine the price of nonmagical goods that contain precious metals or gemstones.<br><br><strong>Hatred</strong> +1 bonus on attack rolls against humanoid creatures of the orc and goblinoid subtypes.<br><br><strong>Hardy</strong> +2 racial bonus on saving throws against poison, spells, and spell-like abilities.<br><br><strong>Stability</strong> +4 racial bonus to their Combat Maneuver Defense when resisting a bull rush or trip attempt while standing on the ground.<br><br><strong>Stonecunning</strong> +2 bonus on Perception checks to notice unusual stonework, such as traps and hidden doors located in stone walls or floors.<br><br><strong>Weapon Familiarity</strong> Dwarves are proficient with battleaxes, heavy picks, and warhammers, and treat any weapon with the word "dwarven" in its name as a martial weapon.<br><br><strong>Evasion</strong> On a successful Reflex save against an attack that normally deals half damage take no damage.<br><br><strong>Flurry of Blows (Ex)</strong> Make a flurry of blows as a full-attack. Taking a -2 penalty on all of his attack rolls, as if using the Two-Weapon Fighting feat.<br><br><strong>Stunning Fist (Ex)</strong> Gain Stunning Fist as a bonus feat. Fortitude saving DC 10 + 1/2 your character level + your Wis modifier.<br><br><strong>Unarmed Strike</strong> Gain Improved Unarmed Strike as a bonus feat. Add full Strength bonus on damage rolls for all unarmed strikes. You can choose to deal lethal or nonlethal damage with no penalty on his attack or grappling rolls. Unarmed damage is 1d6 plus Strength bonus.<br><br><strong>Evasion (Ex)</strong> On a successful Reflex save against an attack that normally deals half damage take no damage.<br><br><strong>Weapon Focus</strong> +1 bonus on attack rolls with one weapon (Grapple)<br><br><strong>Improved Grapple</strong> You do not provoke an attack of opportunity when performing a grapple combat maneuver. +2 to grapple a foe. +2 CMD whenever an opponent tries to grapple you.'},spells:[]};return{data:a}}(),hardCodedCharacters=function(){var a=[nif.data,ro.data,vos.data];return{load:a}}(),helper=function(){function a(a){return document.querySelector(a)}function b(a){return document.querySelectorAll(a)}function c(a,b){a.classList.toggle(b)}function d(a,b){a.classList.add(b)}function e(a,b){a.classList.remove(b)}function f(a,b){window.setTimeout(a,b)}function g(a){var b=helper.e(a);if(document.selection){var c=document.body.createTextRange();c.moveToElementText(b),c.select()}else if(window.getSelection){var c=document.createRange();c.selectNodeContents(b),window.getSelection().removeAllRanges(),window.getSelection().addRange(c)}}function h(a,b){for(var c=b.charAt(0);a&&a!==document;a=a.parentNode){if("."===c&&a.classList.contains(b.substr(1)))return a;if("#"===c&&a.id===b.substr(1))return a;if("["===c&&a.hasAttribute(b.substr(1,b.length-2)))return a;if(a.tagName.toLowerCase()===b)return a}return!1}return{e:a,eA:b,toggleClass:c,addClass:d,removeClass:e,getClosest:h,selectText:g,delayFunction:f}}(),sheet=function(){function a(){h("allCharacters",JSON.stringify(p))}function b(){return p}function c(a){return p[a]}function d(){return q}function e(a){q=a,h("charactersIndex",q)}function f(){p.push({clone:{},input:{},textarea:{},spells:[]});var c=b().length-1;e(c),a(),l(),o(),nav.clear(),nav.render(b())}function g(){p.splice(d(),1);var c=b().length-1;0>c?(p=[{clone:{},input:{},textarea:{},spells:[]}],e(0)):e(c),l(),o(),a(),nav.clear(),nav.render(b())}function h(a,b){localStorage.getItem&&localStorage.setItem(a,b)}function i(a){localStorage.getItem&&localStorage.removeItem(a)}function j(a){if(""==localStorage.getItem(a))localStorage.removeItem(a);else if(localStorage.getItem(a))return localStorage.getItem(a)}function k(){localStorage.clear(),prompt.destroy(),snack.destroy(),document.location.reload(!0)}function l(){for(var a=helper.eA(".input-block"),b=helper.eA(".textarea-block"),c=helper.eA(".clone-target"),d=helper.eA(".spells-known"),e=0;e<a.length;e++){var f=a[e].querySelector(".input-field");helper.e("#"+f.id).value=""}for(var e=0;e<b.length;e++)helper.e("#"+b[e].id).innerHTML="";for(var e=0;e<c.length;e++)c[e].innerHTML="";for(var e=0;e<d.length;e++)d[e].innerHTML="";stats.render(),totalBlock.render()}function m(a){var b=JSON.stringify(p[q],null," ");prompt.render("code","Character object data:",b,"download"),helper.selectText(".prompt pre")}function n(a){var b=p[q],c="text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(b),null," ");a.href="data:"+c}function o(){clone.render(),consumable.render(),inputBlock.render(),textareaBlock.render(),stats.render(),spells.render(),totalBlock.render()}var p=[{clone:{},input:{},textarea:{},spells:[]}],q=0;(function(){j("allCharacters")?p=JSON.parse(j("allCharacters")):"undefined"!=typeof hardCodedCharacters&&(p=hardCodedCharacters.load),a()})(),function(){j("charactersIndex")&&(q=j("charactersIndex"))}();return{getAllCharacters:b,getCharacter:c,addCharacter:f,removeCharacter:g,getIndex:d,setIndex:e,storeCharacters:a,destroy:k,store:h,remove:i,read:j,clear:l,download:n,print:m,render:o}}(),nav=function(){function a(){var a=helper.e(".fullscreen"),b=window.document,c=a.querySelector("span"),d=b.documentElement,e=d.requestFullscreen||d.mozRequestFullScreen||d.webkitRequestFullScreen||d.msRequestFullscreen,f=b.exitFullscreen||b.mozCancelFullScreen||b.webkitExitFullscreen||b.msExitFullscreen;b.fullscreenElement||b.mozFullScreenElement||b.webkitFullscreenElement||b.msFullscreenElement?(f.call(b),helper.toggleClass(a,"active"),helper.toggleClass(c,"icon-fullscreen-exit"),helper.toggleClass(c,"icon-fullscreen")):(e.call(d),helper.toggleClass(a,"active"),helper.toggleClass(c,"icon-fullscreen-exit"),helper.toggleClass(c,"icon-fullscreen"))}function b(a,b){var d=document.createElement("li"),e=document.createElement("span");e.setAttribute("class","icon icon-check-box-unchecked");var f=document.createElement("span");f.textContent=a,f.setAttribute("class","name");var g=document.createElement("a");return g.setAttribute("href","javascript:void(0)"),g.setAttribute("data-character-index",b),g.setAttribute("class","clearfix character-toggle character-index-"+b),g.setAttribute("tabindex",10),g.appendChild(e),g.appendChild(f),d.appendChild(g),c(g,b),d}function c(a,b){a.addEventListener("click",function(){d(this),sheet.storeCharacters(),sheet.setIndex(b),sheet.clear(),sheet.render()},!1)}function d(a){var b=a.dataset.characterIndex,c=helper.eA(".character-toggle");sheet.setIndex(b);for(var d=0;d<c.length;d++){var e=c[d].querySelector(".icon");helper.removeClass(e,"icon-check-box-checked"),helper.addClass(e,"icon-check-box-unchecked"),helper.removeClass(c[d],"active")}var e=a.querySelector(".icon");helper.removeClass(e,"icon-check-box-unchecked"),helper.addClass(e,"icon-check-box-checked"),helper.addClass(a,"active")}function e(){var a=helper.e(".nav-characters");a.innerHTML=""}function f(a){var c=helper.e(".nav-characters");for(i in a){var d;if(d=a[i].input.name?b(a[i].input.name,i):b("New Character",i),c.appendChild(d),i==sheet.getIndex()){var e=d.querySelector(".icon"),f=d.querySelector("a");helper.removeClass(e,"icon-check-box-unchecked"),helper.addClass(e,"icon-check-box-checked"),helper.addClass(e,"icon-check-box-checked"),helper.addClass(f,"active")}}}function g(){helper.removeClass(helper.e("nav"),"open")}function h(){helper.addClass(helper.e("nav"),"open")}function j(){helper.toggleClass(helper.e("nav"),"open")}function k(){var a;a=sheet.getCharacter(sheet.getIndex()).input.name?sheet.getCharacter(sheet.getIndex()).input.name:"New Character",prompt.render("confirm","Remove "+a+"?","This character will be removed. This can not be undone.","clear character")}function l(){var a=helper.e(".nav-list"),b=window.innerHeight-120;a.style.maxHeight=b+"px"}function m(){var b=helper.e("nav"),c=helper.e(".nav-toggle"),d=helper.e(".fullscreen"),e=helper.e(".clear-all"),f=helper.e(".character-add"),h=helper.e(".character-remove"),i=helper.e(".character-export");c.addEventListener("click",function(){j()},!1),d.addEventListener("click",function(){a()},!1),e.addEventListener("click",function(){prompt.render("confirm","Are you sure?","All characters will be removed. This can not be undone.","clear all"),g()},!1),i.addEventListener("click",function(){sheet.print(),g()},!1),f.addEventListener("click",function(){sheet.addCharacter()},!1),h.addEventListener("click",function(){k()},!1),window.addEventListener("click",function(a){a.target!=b&&helper.getClosest(a.target,"nav")!=b&&g()},!1),window.addEventListener("keydown",function(a){27==a.keyCode&&g()},!1),window.addEventListener("resize",function(a){l()},!1)}return{bind:m,resizeNavList:l,clear:e,render:f,open:h,close:g,toggle:j}}(),prompt=function(){function a(a,b,d,e){var f=helper.e("body"),g=document.createElement("div");g.setAttribute("class","prompt prompt-shade");var h=document.createElement("div");h.setAttribute("class","prompt prompt-modal");var i=document.createElement("div");i.setAttribute("class","container");var j=document.createElement("div");j.setAttribute("class","row");var k=document.createElement("div");k.setAttribute("class","row");var l=document.createElement("div");l.setAttribute("class","col-xs-12");var m=document.createElement("div");m.setAttribute("class","col-xs-6");var n=document.createElement("div");n.setAttribute("class","col-xs-6");
var o=document.createElement("div");o.setAttribute("class","col-xs-12 col-sm-6 col-sm-offset-6");var p=document.createElement("div");p.setAttribute("class","prompt-message");var q=document.createElement("h1"),r=document.createElement("p"),s=document.createElement("button");s.setAttribute("class","button button-primary button-block prompt-action");var t=document.createElement("a");t.setAttribute("class","button button-primary button-block prompt-action"),t.setAttribute("download",sheet.getCharacter(sheet.getIndex()).input.name+".json");var u=document.createElement("button");u.setAttribute("class","button button-secondary button-block prompt-cancel");var v=document.createElement("pre");if("confirm"==a&&(q.textContent=b,r.textContent=d,s.textContent="OK",u.textContent="Cancel",p.appendChild(q),p.appendChild(r),l.appendChild(p),j.appendChild(l),m.appendChild(u),k.appendChild(m),n.appendChild(s),k.appendChild(n),i.appendChild(j),i.appendChild(k),h.appendChild(i)),"code"==a&&(q.textContent=b,v.textContent=d,t.textContent="Download",u.textContent="Cancel",p.appendChild(q),p.appendChild(v),l.appendChild(p),j.appendChild(l),m.appendChild(u),n.appendChild(t),k.appendChild(m),k.appendChild(n),i.appendChild(j),i.appendChild(k),h.appendChild(i)),!f.querySelector(".prompt.prompt-shade")&&!f.querySelector(".prompt.prompt-modal")){f.appendChild(g),f.appendChild(h);var w=function(){helper.addClass(h,"reveal"),helper.addClass(g,"reveal")};helper.delayFunction(w,10),c(e)}}function b(){var a=helper.e(".prompt-shade"),b=helper.e(".prompt-modal");helper.e(".prompt-modal .prompt-cancel");if(a&&b){a.style.opacity=0,b.style.opacity=0;var c=function(){a.remove(),b.remove()};helper.delayFunction(c,500)}}function c(a){var c=helper.e(".prompt-shade"),d=(helper.e(".prompt-modal"),helper.e(".prompt-modal .prompt-action")),e=helper.e(".prompt-modal .prompt-cancel");c.addEventListener("click",function(){b()}),"clear all"==a&&d.addEventListener("click",function(){b(),sheet.destroy()},!1),"clear character"==a&&d.addEventListener("click",function(){sheet.removeCharacter(),b()},!1),"download"==a&&d.addEventListener("click",function(){sheet.download(this)},!1),e.addEventListener("click",function(){b()},!1),window.addEventListener("keydown",function(a){27==a.keyCode&&b()},!1)}return{render:a,destroy:b}}(),snack=function(){function a(a,d){var e=helper.e(".snacks .snack-bars"),f=document.createElement("div");f.setAttribute("class","snack-bar");var g=document.createElement("div");g.setAttribute("class","row");var h=document.createElement("div");h.setAttribute("class","col-xs-7");var i=document.createElement("div");i.setAttribute("class","col-xs-5");var j=document.createElement("button");j.setAttribute("class","button button-dark button-small snack-clear");var k=document.createElement("span");k.setAttribute("class","icon-close");var l=document.createElement("p");l.setAttribute("class","snack-message"),l.textContent=a,j.appendChild(k),d&&i.appendChild(j),h.appendChild(l),g.appendChild(h),g.appendChild(i),f.appendChild(g);for(var m=e.querySelectorAll(".snack-bar"),n=0;n<m.length;n++){var o=m[n],p=function(){helper.removeClass(o,"reveal")};helper.delayFunction(p,100);var q=function(){o.remove()};helper.delayFunction(q,400)}e.appendChild(f),b(f);var r=function(){helper.addClass(f,"reveal")};helper.delayFunction(r,10);var s=function(){f&&c(f)};helper.delayFunction(s,5e3)}function b(a){var b=helper.getClosest(a,".snack-bar"),d=b.querySelector(".snack-clear");d&&d.addEventListener("click",function(){c(this)},!1),window.addEventListener("keydown",function(a){27==a.keyCode&&c()},!1)}function c(a){if(a)var b=helper.getClosest(a,".snack-bar");else var b=helper.e(".snack-bar");if(b){var c=function(){helper.removeClass(b,"reveal")};helper.delayFunction(c,10);var d=function(){b.remove()};helper.delayFunction(d,500)}}return{render:a,destroy:c}}(),clone=function(){function a(a){var b='<div class="row"><div class="col-sm-12 col-lg-6"><div class="row no-gutter"><div class="col-xs-8"><div class="input-block"><label class="input-label" for="input-item-'+a+'">Item</label><input class="input-field input-item" id="input-item-'+a+'" type="text" tabindex="3"></div></div><div class="col-xs-2"><div class="input-block"><label class="input-label" for="input-total-'+a+'">Total</label><input class="input-field consumable-total input-total" id="input-total-'+a+'" type="number" tabindex="3"></div></div><div class="col-xs-2"><div class="input-block"><label class="input-label" for="input-used-'+a+'">Used</label><input class="input-field consumable-used input-used" id="input-used-'+a+'" type="number" tabindex="3"></div></div></div></div><div class="col-sm-12 col-lg-6"><div class="consumable-counts clearfix"></div></div><div class="col-xs-12"><div class="clone-delete-controls"><button class="button button-primary button-small" tabindex="3"><span class="icon-close"></span></button></div></div></div>';return b}function b(a){var b='<div class="row no-gutter"><div class="col-xs-6 col-md-4"><div class="input-block"><label class="input-label" for="input-weapon-'+a+'">Weapon</label><input class="input-field input-weapon" id="input-weapon-'+a+'" type="text" tabindex="3"></div></div><div class="col-xs-2 col-md-2"><div class="input-block"><label class="input-label" for="input-attack-'+a+'">Attack</label><input class="input-field input-attack" id="input-attack-'+a+'" type="text" tabindex="3"></div></div><div class="col-xs-2 col-md-2"><div class="input-block"><label class="input-label" for="input-damage-'+a+'">Damage</label><input class="input-field input-damage" id="input-damage-'+a+'" type="text" tabindex="3"></div></div><div class="col-xs-2 col-md-2"><div class="input-block"><label class="input-label" for="input-critical-'+a+'">Critical</label><input class="input-field input-critical" id="input-critical-'+a+'" type="text" tabindex="3"></div></div><div class="col-xs-3 col-md-1"><div class="input-block"><label class="input-label" for="input-range-'+a+'">Range</label><input class="input-field input-range" id="input-range-'+a+'" type="text" tabindex="3"></div></div><div class="col-xs-3 col-md-1"><div class="input-block"><label class="input-label" for="input-ammo-'+a+'">Ammo</label><input class="input-field input-ammo" id="input-ammo-'+a+'" type="text" tabindex="3"></div></div><div class="col-xs-6 col-md-12"><div class="clone-delete-controls"><button class="button button-primary button-small" id="remove-attack" tabindex="3"><span class="icon-close"></span></button></div></div></div>';return b}function c(a){a.value<=0?a.value="":a.value>=100&&(a.value=100)}function d(a,b){a.addEventListener("click",function(){i(this,b),m(),n(),sheet.storeCharacters(),"consumable"==b&&(h("consumable"),snack.render("Consumable removed.",!1,!1)),"attack"==b&&(h("attack"),snack.render("Attack removed.",!1,!1))},!1)}function e(a){for(var b=0;b<a.length;b++){var c=a[b].querySelector(".input-field");c.addEventListener("input",function(){m(),sheet.storeCharacters(),inputBlock.focus(this)},!1),c.addEventListener("focus",function(){m(),sheet.storeCharacters(),inputBlock.focus(this)},!1),c.addEventListener("blur",function(){m(),sheet.storeCharacters(),inputBlock.focus(this)},!1)}}function f(a){for(var b=0;b<a.length;b++){var d=a[b].querySelector(".input-field");(d.classList.contains("consumable-used")||d.classList.contains("consumable-total"))&&(d.addEventListener("input",function(){c(this)},!1),d.addEventListener("focus",function(){c(this)},!1),d.addEventListener("blur",function(){c(this)},!1)),d.addEventListener("input",function(){n(),consumable.render(),consumable.update(),sheet.storeCharacters(),inputBlock.focus(this)},!1),d.addEventListener("focus",function(){n(),consumable.render(),consumable.update(),sheet.storeCharacters(),inputBlock.focus(this)},!1),d.addEventListener("blur",function(){n(),consumable.render(),consumable.update(),sheet.storeCharacters(),inputBlock.focus(this)},!1)}}function g(a){var b=helper.e("."+a),c=b.querySelector(".clone-controls"),d=c.querySelector(".clone-remove"),e=(b.querySelectorAll(".clone-delete-controls"),b.querySelector(".clone-target")),f=e.querySelectorAll(".clone"),g=f.length;helper.toggleClass(d,"active"),helper.toggleClass(d,"button-primary"),helper.toggleClass(d,"button-secondary"),"true"==b.dataset.deleteCloneState?(helper.removeClass(b,"delete-state"),b.dataset.deleteCloneState="false"):"false"==b.dataset.deleteCloneState&&(helper.addClass(b,"delete-state"),b.dataset.deleteCloneState="true"),0==g&&(helper.removeClass(b,"delete-state"),b.dataset.deleteCloneState="false",helper.removeClass(d,"active"),helper.removeClass(d,"button-primary"),helper.addClass(d,"button-secondary"))}function h(a){var b=helper.e("."+a),c=b.querySelector(".clone-controls"),d=c.querySelector(".clone-remove"),e=(b.querySelectorAll(".clone-delete-controls"),b.querySelector(".clone-target")),f=e.querySelectorAll(".clone"),g=f.length;0==g&&(b.dataset.deleteCloneState="false",helper.removeClass(b,"delete-state"),helper.removeClass(d,"active"),helper.removeClass(d,"button-primary"),helper.addClass(d,"button-secondary"))}function i(a,b){var c=helper.getClosest(a,".clone-block"),d=(c.querySelector(".clone-target"),helper.getClosest(a,".clone"));d.remove()}function j(c,g){for(var h=helper.e("."+g),i=h.querySelector(".clone-target"),j=0;j<c.length;j++){var k,l=i.querySelectorAll(".clone").length,m=(c[j],document.createElement("div")),n=j;if(l>n&&(n=l),"consumable"==g&&(k=a(n)),"attack"==g&&(k=b(n)),m.setAttribute("class","clone"),m.innerHTML=k,99>=l&&(i.appendChild(m),"consumable"==g&&f(m.querySelectorAll(".input-block")),"attack"==g&&e(m.querySelectorAll(".input-block")),d(m.querySelector(".clone-delete-controls button"),g)),n==j)for(var o in c[j])m.querySelector(".input-"+o.replace(/_/g,"-")).value=c[n][o]}}function k(a,b,c,d,e,f){return{weapon:this.weapon=a,attack:this.attack=b,damage:this.damage=c,critical:this.critical=d,ammo:this.ammo=e,range:this.range=f}}function l(a,b,c){return{item:this.item=a,total:this.total=b,used:this.used=c}}function m(){for(var a=helper.e(".clone-block.attack"),b=a.querySelector(".clone-target"),c=b.querySelectorAll(".clone"),d=[],e=0;e<c.length;e++){var f=c[e].querySelector(".input-weapon").value||"",g=c[e].querySelector(".input-attack").value||"",h=c[e].querySelector(".input-damage").value||"",i=c[e].querySelector(".input-range").value||"",j=c[e].querySelector(".input-ammo").value||"",l=c[e].querySelector(".input-critical").value||"",m=new k(f,g,h,i,j,l);d.push(m)}sheet.getCharacter(sheet.getIndex()).clone.attack=d}function n(){for(var a=helper.e(".clone-block.consumable"),b=a.querySelector(".clone-target"),c=b.querySelectorAll(".clone"),d=[],e=0;e<c.length;e++){var f=c[e].querySelector(".input-item").value||"",g=c[e].querySelector(".input-total").value||"",h=c[e].querySelector(".input-used").value||"",i=new l(f,g,h);d.push(i)}sheet.getCharacter(sheet.getIndex()).clone.consumable=d}function o(){var a=[],b=[];if(sheet.getCharacter(sheet.getIndex()).clone.attack)for(var c in sheet.getCharacter(sheet.getIndex()).clone.attack)a.push(sheet.getCharacter(sheet.getIndex()).clone.attack[c]);if(sheet.getCharacter(sheet.getIndex()).clone.consumable)for(var c in sheet.getCharacter(sheet.getIndex()).clone.consumable)b.push(sheet.getCharacter(sheet.getIndex()).clone.consumable[c]);j(a,"attack"),j(b,"consumable")}(function(){var a=helper.e(".consumable .clone-add"),b=helper.e(".consumable .clone-remove"),c=helper.e(".attack .clone-add"),d=helper.e(".attack .clone-remove");a.addEventListener("click",function(){j([{item:"",total:"",used:""}],"consumable"),n(),snack.render("Consumable added.",!1,!1),sheet.storeCharacters()},!1),b.addEventListener("click",function(){g("consumable"),n(),sheet.storeCharacters()},!1),c.addEventListener("click",function(){j([{weapon:"",attack:"",damage:"",critical:"",ammo:"",range:""}],"attack"),m(),snack.render("Attack added.",!1,!1),sheet.storeCharacters()},!1),d.addEventListener("click",function(){g("attack"),m(),sheet.storeCharacters()},!1)})();return{render:o}}(),consumable=function(){function a(a){function c(){var a=document.createElement("div");a.setAttribute("class","check-group"),e.appendChild(a)}var d=helper.getClosest(a,".clone"),e=d.querySelector(".consumable-counts"),f=parseInt(a.value,10)||0,g=e.querySelector(".check-group"),h=e.querySelectorAll(".check").length;for(g||f>0&&c();f>h;){var g=e.lastChild;g.children.length>=10&&(c(),g=e.lastChild);var i=document.createElement("span");i.setAttribute("class","check"),g.appendChild(i),h++}for(;h>f;){var g=e.lastChild;g.children.length>0&&g.removeChild(g.lastChild),g.children.length<=0&&(g.remove(),h>0&&(g=e.querySelector(".check-group"))),h--}b(a)}function b(a){for(var b=helper.getClosest(a,".clone"),c=b.querySelector(".consumable-counts"),d=b.querySelector(".consumable-used"),e=parseInt(d.value,10)||0,f=c.querySelectorAll(".check"),g=f.length-e,h=0;h<f.length;h++)helper.addClass(f[h],"used");for(var h=0;g>h;h++)helper.removeClass(f[h],"used")}function c(){for(var b=helper.e(".clone-block.consumable").querySelectorAll(".consumable-total"),c=0;c<b.length;c++)a(b[c])}function d(){for(var a=helper.e(".clone-block.consumable").querySelectorAll(".consumable-used"),c=0;c<a.length;c++)b(a[c])}return{render:c,update:d}}(),hidableBlock=function(){function a(){for(var a=helper.eA(".hidable-block"),c=0;c<a.length;c++){var d=a[c].querySelector(".hidable-toggle");d.addEventListener("click",function(){b(this)},!1)}}function b(a){var b=(a.textContent,a.querySelector(".icon")),c=a.querySelector(".text"),d=helper.getClosest(a,".hidable-block"),e=d.querySelectorAll(".hidable"),f=d.querySelectorAll(".hidable-on-empty-input"),g=d.querySelectorAll(".hidable-on-empty-textarea");if("true"==d.dataset.allHidden){for(var h=0;h<e.length;h++)helper.removeClass(e[h],"hidden");for(var h=0;h<f.length;h++)helper.removeClass(f[h],"hidden");for(var h=0;h<g.length;h++)helper.removeClass(g[h],"hidden");d.dataset.allHidden="false",helper.toggleClass(b,"icon-unfold-less"),helper.toggleClass(b,"icon-unfold-more"),c.textContent="Hide"}else if("false"==d.dataset.allHidden){for(var h=0;h<f.length;h++){var i=f[h].querySelector(".input-field");(null==i.value||""==i.value)&&helper.addClass(f[h],"hidden")}for(var h=0;h<e.length;h++)helper.addClass(e[h],"hidden");for(var h=0;h<g.length;h++){var j=g[h].querySelector(".textarea-block");(null==j.textContent||""==j.textContent)&&helper.addClass(g[h],"hidden")}d.dataset.allHidden="true",helper.toggleClass(b,"icon-unfold-less"),helper.toggleClass(b,"icon-unfold-more"),c.textContent="Show"}}return{render:b,bind:a}}(),inputBlock=function(){function a(a){var b=a.id.replace("input-","").replace(/-/g,"_");sheet.getCharacter(sheet.getIndex()).input[b]=a.value,sheet.storeCharacters()}function b(a){var b,c=helper.getClosest(a,".input-block"),d=c.querySelector(".input-field");if(c.querySelector(".input-label"))var b=c.querySelector(".input-label");c.querySelector(".input-label")&&(d==document.activeElement?helper.addClass(b,"input-label-focus"):helper.removeClass(b,"input-label-focus"))}function c(c){for(var e=0;e<c.length;e++)if(c[e].dataset.inputStore){var f=c[e].querySelector(".input-field");f.addEventListener("input",function(){a(this),b(this),totalBlock.render()},!1),f.addEventListener("focus",function(){a(this),b(this),totalBlock.render()},!1),f.addEventListener("blur",function(){a(this),b(this),totalBlock.render()},!1)}d()}function d(){var a=helper.e(".awesome-name input");a.addEventListener("input",function(){e(this.value),f(this.value)},!1),a.addEventListener("focus",function(){e(this.value)},!1),a.addEventListener("blur",function(){e(this.value)},!1)}function e(a){var b=helper.e(".character-index-"+sheet.getIndex()).querySelector(".name");b.textContent=a}function f(a){a.length>=150&&snack.render("Character name is too long.",!1,!1)}function g(){if(sheet.getCharacter(sheet.getIndex()).input)for(var a in sheet.getCharacter(sheet.getIndex()).input){var b="#input-"+a.replace(/_/g,"-");helper.e(b).value=sheet.getCharacter(sheet.getIndex()).input[a]}}return{focus:b,render:g,bind:c}}(),textareaBlock=function(){function a(a){var b=a.id.replace("textarea-","").replace(/-/g,"_");sheet.getCharacter(sheet.getIndex()).textarea[b]=a.innerHTML,sheet.storeCharacters()}function b(b){for(var c=0;c<b.length;c++){var d=b[c];d.addEventListener("input",function(){a(this)},!1),d.addEventListener("focus",function(){a(this)},!1),d.addEventListener("blur",function(){a(this)},!1)}}function c(){if(sheet.getCharacter(sheet.getIndex()).textarea)for(var a in sheet.getCharacter(sheet.getIndex()).textarea){var b="#textarea-"+a.replace(/_/g,"-");helper.e(b).innerHTML=sheet.getCharacter(sheet.getIndex()).textarea[a]}}return{render:c,bind:b}}(),spells=function(){function a(a){a.addEventListener("click",function(){b(this),sheet.storeCharacters()},!1)}function b(a){var b=helper.getClosest(a,"#spells"),c=(helper.getClosest(a,".spell-level").dataset.spellLevel,b.dataset.prepareSpellState),d=b.dataset.unprepareSpellState,e=b.dataset.castSpellState,f=b.dataset.activeSpellState,g=b.dataset.deleteSpellState,h=a.querySelector(".spell-marks"),j=a.querySelector(".spell-active");if("true"==c){var k=document.createElement("span");k.setAttribute("class","icon icon-radio-button-checked"),h.insertBefore(k,h.firstChild),h.children.length>0&&(helper.addClass(a,"button-primary"),helper.removeClass(a,"button-tertiary"),helper.removeClass(a,"hidable"))}if("true"==d&&(h.firstChild&&h.firstChild.remove(),h.children.length<=0&&(helper.removeClass(a,"button-primary"),helper.addClass(a,"button-tertiary"),helper.addClass(a,"hidable"))),"true"==e){for(var l=h.children,m=0,n=0;n<l.length;n++)if(l[n].classList.contains("icon-radio-button-checked")){helper.toggleClass(l[n],"icon-radio-button-checked"),helper.toggleClass(l[n],"icon-radio-button-unchecked");break}for(var n=0;n<l.length;n++)l[n].classList.contains("icon-radio-button-checked")&&m++;0>=m&&(helper.removeClass(a,"button-primary"),helper.addClass(a,"button-tertiary"))}if("true"==f){var o=document.createElement("span");o.setAttribute("class","icon icon-play-arrow"),h.children.length>0&&(j.children.length>0?j.firstChild.remove():j.appendChild(o)),h.children.length<=0&&j.children.length>0&&j.firstChild.remove()}if("true"==g){var p=a.textContent;a.remove(),snack.render(p+" removed.",!1,!1)}i()}function c(a){var b=helper.getClosest(a,".spell-level").dataset.spellLevel,c=a.value,d=h(c,parseInt(b,10),0,!1,0);""!==c&&(isNaN(c.charAt(0))?(f([d]),a.value="",sheet.getCharacter(sheet.getIndex()).spells.push(d),snack.render(c+" added to spell level "+b+".",!1,!1)):snack.render("Name can't start with a number.",!1,!1))}function d(a){var b=event.keyCode||event.which;13==b&&(c(a),sheet.storeCharacters())}function e(a,b){var c=helper.getClosest(a,"#spells"),d=(c.querySelector(".prepare-spell"),c.querySelector(".unprepare-spell"),c.querySelector(".cast-spell"),c.querySelector(".active-spell"),c.querySelector(".remove-spell")),e=c.querySelectorAll(".spell-state-control");if(a.classList.contains("active")){for(var f=0;f<e.length;f++)helper.removeClass(e[f],"active");c.dataset.prepareSpellState="false",c.dataset.unprepareSpellState="false",c.dataset.castSpellState="false",c.dataset.activeSpellState="false",c.dataset.deleteSpellState="false",helper.removeClass(c,"prepare-state"),helper.removeClass(c,"unprepare-state"),helper.removeClass(c,"cast-state"),helper.removeClass(c,"active-state"),helper.removeClass(c,"delete-state"),helper.removeClass(d,"button-primary"),helper.addClass(d,"button-secondary")}else{for(var f=0;f<e.length;f++)helper.removeClass(e[f],"active");helper.addClass(a,"active"),"prepare"==b?(c.dataset.prepareSpellState="true",c.dataset.unprepareSpellState="false",c.dataset.castSpellState="false",c.dataset.activeSpellState="false",c.dataset.deleteSpellState="false",helper.addClass(c,"prepare-state"),helper.removeClass(c,"unprepare-state"),helper.removeClass(c,"cast-state"),helper.removeClass(c,"active-state"),helper.removeClass(c,"delete-state"),helper.removeClass(d,"button-primary"),helper.addClass(d,"button-secondary")):"unprepare"==b?(c.dataset.prepareSpellState="false",c.dataset.unprepareSpellState="true",c.dataset.castSpellState="false",c.dataset.activeSpellState="false",c.dataset.deleteSpellState="false",helper.removeClass(c,"prepare-state"),helper.addClass(c,"unprepare-state"),helper.removeClass(c,"cast-state"),helper.removeClass(c,"active-state"),helper.removeClass(c,"delete-state"),helper.removeClass(d,"button-primary"),helper.addClass(d,"button-secondary")):"cast"==b?(c.dataset.prepareSpellState="false",c.dataset.unprepareSpellState="false",c.dataset.castSpellState="true",c.dataset.activeSpellState="false",c.dataset.deleteSpellState="false",helper.removeClass(c,"prepare-state"),helper.removeClass(c,"unprepare-state"),helper.addClass(c,"cast-state"),helper.removeClass(c,"active-state"),helper.removeClass(c,"delete-state"),helper.removeClass(d,"button-primary"),helper.addClass(d,"button-secondary")):"active"==b?(c.dataset.prepareSpellState="false",c.dataset.unprepareSpellState="false",c.dataset.castSpellState="false",c.dataset.activeSpellState="true",c.dataset.deleteSpellState="false",helper.removeClass(c,"prepare-state"),helper.removeClass(c,"unprepare-state"),helper.removeClass(c,"cast-state"),helper.addClass(c,"active-state"),helper.removeClass(c,"delete-state"),helper.removeClass(d,"button-primary"),helper.addClass(d,"button-secondary")):"remove"==b&&(c.dataset.prepareSpellState="false",c.dataset.unprepareSpellState="false",c.dataset.castSpellState="false",c.dataset.activeSpellState="false",c.dataset.deleteSpellState="true",helper.removeClass(c,"prepare-state"),helper.removeClass(c,"unprepare-state"),helper.removeClass(c,"cast-state"),helper.removeClass(c,"active-state"),helper.addClass(c,"delete-state"),helper.addClass(d,"button-primary"),helper.removeClass(d,"button-secondary"))}}function f(b){for(var c=0;c<b.length;c++){var d=b[c],e=helper.e(".spells-known.spell-level-"+d.level),f=g(d.name);e.appendChild(f);var h=f.querySelector(".spell-marks"),i=f.querySelector(".spell-active");if(d.prepared>0){helper.removeClass(f,"hidable"),helper.removeClass(f,"button-tertiary"),helper.addClass(f,"button-primary");for(var j=0;j<d.prepared;j++){var k=document.createElement("span");k.setAttribute("class","icon icon-radio-button-checked"),h.insertBefore(k,h.firstChild)}}if(d.cast>0){for(var l=h.querySelectorAll(".icon-radio-button-checked"),j=0;j<d.cast;j++)l[j]&&(helper.removeClass(l[j],"icon-radio-button-checked"),helper.addClass(l[j],"icon-radio-button-unchecked"));d.cast>=d.prepared&&(helper.removeClass(f,"button-primary"),helper.addClass(f,"button-tertiary"))}if(d.active){var m=document.createElement("span");m.setAttribute("class","icon icon-play-arrow"),d.prepared>0&&(i.children.length>0?i.firstChild.remove():i.appendChild(m))}a(f)}}function g(a){var b=document.createElement("button");b.setAttribute("data-spell-name",a.replace(/\s+/g,"-").toLowerCase()),b.setAttribute("id",a.replace(/\s+/g,"-").toLowerCase()),b.setAttribute("class","spell-known-item button button-tertiary hidable");var c=document.createElement("span");c.setAttribute("class","spell-name"),c.textContent=a,b.appendChild(c);var d=document.createElement("span");d.setAttribute("class","spell-marks"),b.appendChild(d);var e=document.createElement("span");return e.setAttribute("class","spell-active"),b.appendChild(e),b}function h(a,b,c,d,e){return{name:this.name=a,level:this.level=b,prepared:this.prepared=c||0,active:this.active=d||!1,cast:this.cast=e||0}}function i(){for(var a=helper.eA(".spell-known-item"),b=[],c=0;c<a.length;c++){var d=a[c].textContent,e=parseInt(helper.getClosest(a[c],".spell-level").dataset.spellLevel,10)||0,f=a[c].querySelector(".spell-marks").children.length,g=a[c].querySelector(".spell-marks").querySelectorAll(".icon-radio-button-unchecked").length,i=a[c].querySelector(".spell-active").children.length;i=i>0?!0:!1;var j=new h(d,e,f,i,g);b.push(j)}sheet.getCharacter(sheet.getIndex()).spells=b}function j(){var a=[];if(sheet.getCharacter(sheet.getIndex()).spells)for(var b in sheet.getCharacter(sheet.getIndex()).spells)a.push(sheet.getCharacter(sheet.getIndex()).spells[b]);f(a)}(function(){for(var a=helper.eA(".add-spell"),b=0;b<a.length;b++)a[b].addEventListener("click",function(){c(helper.getClosest(this,".new-spell").querySelector(".spell-name")),i(),sheet.storeCharacters()},!1);for(var b=0;b<a.length;b++){var f=helper.getClosest(a[b],".new-spell"),g=f.querySelector("input");g.addEventListener("keypress",function(){d(this),i(),sheet.storeCharacters()},!1)}helper.e("#spells .prepare-spell").addEventListener("click",function(){e(this,"prepare")},!1),helper.e("#spells .unprepare-spell").addEventListener("click",function(){e(this,"unprepare")},!1),helper.e("#spells .cast-spell").addEventListener("click",function(){e(this,"cast")},!1),helper.e("#spells .active-spell").addEventListener("click",function(){e(this,"active")},!1),helper.e("#spells .remove-spell").addEventListener("click",function(){e(this,"remove")},!1)})();return{render:j}}(),stats=function(){function a(a,c){var d=(parseInt(a.value,10)||0,b(a));c.textContent=d}function b(a){var b=Math.floor((a.value-10)/2);return b}function c(){for(var b=helper.eA(".stats"),c=0;c<b.length;c++){var d=b[c].querySelector(".score"),e=b[c].querySelector(".modifier"),f=b[c].querySelector(".score-temp"),g=b[c].querySelector(".modifier-temp");""!==d.value?a(d,e):e.textContent="",""!==f.value?a(f,g):g.textContent=""}}function d(){for(var a=helper.eA(".stats .score"),b=helper.eA(".stats .score-temp"),d=0;d<a.length;d++)a[d].addEventListener("input",function(){c(),totalBlock.render()},!1);for(var d=0;d<b.length;d++)b[d].addEventListener("input",function(){c(),totalBlock.render()},!1)}return{render:c,bind:d}}(),totalBlock=function(){function a(){function a(){H.length>0&&(I=H.reduce(function(a,b){return a+b}))}for(var b=helper.e(".stats.str .modifier"),c=helper.e(".stats.dex .modifier"),d=helper.e(".stats.con .modifier"),e=helper.e(".stats.int .modifier"),f=helper.e(".stats.wis .modifier"),g=helper.e(".stats.cha .modifier"),h=helper.e(".stats.str .modifier-temp"),i=helper.e(".stats.dex .modifier-temp"),j=helper.e(".stats.con .modifier-temp"),k=helper.e(".stats.int .modifier-temp"),l=helper.e(".stats.wis .modifier-temp"),m=helper.e(".stats.cha .modifier-temp"),n=helper.eA(".input-total-block"),o=0;o<n.length;o++){for(var p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=n[o].querySelector(".total"),G=(parseInt(n[o].querySelector(".total").textContent,10)||0,n[o].querySelectorAll(".input-field")),H=[],I=0,J=0;J<G.length;J++)G.length>0&&"true"==G[J].dataset.modifier&&H.push(parseInt(G[J].value,10)||0);a(),"true"==n[o].dataset.strBonus&&(p=""==h.textContent?parseInt(b.textContent,10):parseInt(h.textContent,10)),"true"==n[o].dataset.dexBonus&&(q=""==i.textContent?parseInt(c.textContent,10):parseInt(i.textContent,10)),"true"==n[o].dataset.conBonus&&(r=""==j.textContent?parseInt(d.textContent,10):parseInt(j.textContent,10)),"true"==n[o].dataset.intBonus&&(s=""==k.textContent?parseInt(e.textContent,10):parseInt(k.textContent,10)),"true"==n[o].dataset.wisBonus&&(t=""==l.textContent?parseInt(f.textContent,10):parseInt(l.textContent,10)),"true"==n[o].dataset.chaBonus&&(u=""==m.textContent?parseInt(g.textContent,10):parseInt(m.textContent,10)),"true"==n[o].dataset.babBonus&&(v=parseInt(helper.e("#input-base-attack").value,10)),"true"==n[o].dataset.sizeBonus&&(w=parseInt(helper.e("#input-size-bonus").value,10)),"true"==n[o].dataset.specialSizeBonus&&(x=parseInt(helper.e("#input-special-size-bonus").value,10)),"true"==n[o].dataset.levelBonus&&(y=parseInt(helper.e("#input-level").value,10)),"true"==n[o].dataset.acArmor&&(A=parseInt(helper.e("#input-ac-armor").value,10)),"true"==n[o].dataset.acShield&&(B=parseInt(helper.e("#input-ac-shield").value,10)),"true"==n[o].dataset.acDeflect&&(C=parseInt(helper.e("#input-ac-deflect").value,10)),"true"==n[o].dataset.acDodge&&(D=parseInt(helper.e("#input-ac-dodge").value,10)),"true"==n[o].dataset.acNatural&&(E=parseInt(helper.e("#input-ac-natural").value,10)),"true"==n[o].dataset.plusTenBonus&&(z=10),isNaN(y)&&(y=0),isNaN(p)&&(p=0),isNaN(q)&&(q=0),isNaN(r)&&(r=0),isNaN(s)&&(s=0),isNaN(t)&&(t=0),isNaN(u)&&(u=0),isNaN(v)&&(v=0),isNaN(w)&&(w=0),isNaN(x)&&(x=0),isNaN(y)&&(y=0),isNaN(z)&&(z=0),isNaN(A)&&(A=0),isNaN(B)&&(B=0),isNaN(C)&&(C=0),isNaN(D)&&(D=0),isNaN(E)&&(E=0);var K=I+y+v+w+x+z+p+q+r+s+t+u+A+B+C+D+E;F.textContent=K}}return{render:a}}();!function(){nav.bind(),nav.render(sheet.getAllCharacters()),nav.resizeNavList(),hidableBlock.bind(),inputBlock.bind(helper.eA(".input-block")),textareaBlock.bind(helper.eA(".textarea-block")),stats.bind(),sheet.render()}();